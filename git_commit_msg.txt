feat: Refactor updateUserFavorites function to streamline favorite management and improve error handling